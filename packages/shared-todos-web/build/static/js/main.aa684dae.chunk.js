(this["webpackJsonpshared-todos-web"]=this["webpackJsonpshared-todos-web"]||[]).push([[0],{179:function(e,t,n){e.exports=n(279)},220:function(e,t,n){},273:function(e,t,n){},278:function(e,t,n){},279:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(22),o=n.n(c),u=n(39),i=n(36),l=n(90),s=n(142),p=n(62),f=(n(192),n(193),{apiHost:"https://us-central1-shared-todos-fb.cloudfunctions.net",firebaseConfig:{apiKey:"AIzaSyDXyJwQbD7bYdCj-AkXYLM80j3oVFHGIcw",authDomain:"shared-todos-fb.firebaseapp.com",databaseURL:"https://shared-todos-fb.firebaseio.com",projectId:"shared-todos-fb",storageBucket:"shared-todos-fb.appspot.com",messagingSenderId:"92468362104",appId:"1:92468362104:web:c66efaad8189915ebde68d"}});p.initializeApp(f.firebaseConfig);var d=p.auth(),m=p.firestore(),h=new p.auth.GoogleAuthProvider;m.enablePersistence().catch((function(e){"failed-precondition"===e.code||e.code,console.error(e)}));var b=n(28),E=n.n(b),v=n(42),w=n(80),j=n(282),y=n(288),O=n(129),g=n(283),k=n(284),x=n(287),C=n(286),S=n(289),I=n(290),A=n(291),D=n(292),U=n(285),B=n(176),P=n(293);var F=function(e){var t=e.onCreate,n=e.text,c=Object(B.a)(e,["onCreate","text"]),o=Object(a.useState)(""),i=Object(u.a)(o,2),l=i[0],s=i[1],p=Object(a.useState)(""),f=Object(u.a)(p,2),d=f[0],m=f[1];function h(){""!==l.trim()&&t(l),s(""),m(!1)}return d?r.a.createElement(S.a,{autoFocus:!0,type:"text",size:"small",className:"tag-input",value:l,onChange:function(e){return s(e.target.value)},onBlur:h,onPressEnter:h}):r.a.createElement(D.a,Object.assign({},c,{className:"site-tag-plus",onClick:function(){return m(!0)}}),r.a.createElement(P.a,null)," ",n)},T=(n(220),n(273),x.a.Title);var L=function(){function e(){return(e=Object(v.a)(E.a.mark((function e(){var t;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.signInWithPopup(h);case 3:t=e.sent,console.log(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return r.a.createElement(j.a,null,r.a.createElement(j.a.Content,null,r.a.createElement("div",{className:"login-content"},r.a.createElement(T,{level:2},"Shared Todos"),r.a.createElement(w.a,{onClick:function(){return e.apply(this,arguments)}},"Sign in with google"))))},M=n(295),N=n(296),R=n(294);var z=function(e){var t=e.title,n=e.onBack,a=e.doShowSettings,c=e.doShowAvatar,o=e.children,u=d.currentUser.photoURL;return r.a.createElement(j.a,{className:"app-layout"},r.a.createElement(j.a.Content,{className:"app-content"},r.a.createElement(y.a,{title:t,onBack:n,avatar:c&&{src:u},extra:a&&[r.a.createElement(U.a,{placement:"bottomRight",overlay:r.a.createElement(O.a,null,r.a.createElement(O.a.Item,{onClick:function(){d.signOut()}},"Logout")),trigger:["click"]},r.a.createElement(w.a,{shape:"circle",icon:r.a.createElement(R.a,null),style:{border:"none"}}))]},o)))},H=n(118);function J(){return m.collection("lists")}function V(){return m.collection("todos")}function W(e){var t=e.onCreate,n=Object(a.useState)(""),c=Object(u.a)(n,2),o=c[0],i=c[1];function l(e){""!==e.trim()&&(t(e),i(""))}return r.a.createElement(g.a,{style:{flexWrap:"nowrap"},gutter:16},r.a.createElement(k.a,{flex:1},r.a.createElement(S.a,{placeholder:"Add new list...",value:o,onChange:function(e){return i(e.target.value)},onPressEnter:function(){return l(o)}})),r.a.createElement(k.a,null,r.a.createElement(w.a,{shape:"circle",icon:r.a.createElement(M.a,null),onClick:function(){return l(o)}})))}var G=function(){var e=d.currentUser,t=e.uid,n=e.email,a=J(),c=function(e){var t=J().where("shared","array-contains",e);return Object(H.a)(t,{idField:"id"})}(n),o=Object(u.a)(c,1)[0];function i(){return(i=Object(v.a)(E.a.mark((function e(r){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.add({title:r,createdAt:p.firestore.FieldValue.serverTimestamp(),uid:t,shared:[n]});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(){return(s=Object(v.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.doc(t).delete();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(z,{title:"My Todo lists",doShowSettings:!0,doShowAvatar:!0},r.a.createElement(C.b,{header:r.a.createElement(W,{onCreate:function(e){return i.apply(this,arguments)}}),bordered:!0},o&&o.map((function(e){return r.a.createElement(C.b.Item,{key:e.id},r.a.createElement(l.b,{to:"/".concat(e.id)},e.title),r.a.createElement(w.a,{shape:"circle",icon:r.a.createElement(N.a,null),onClick:function(){return function(e){return s.apply(this,arguments)}(e.id)}}))}))))};var X=function(){var e=Object(a.useRef)(null),t=Object(a.useState)(!1),n=Object(u.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(null),i=Object(u.a)(o,2),l=i[0],s=i[1];function p(){return(p=Object(v.a)(E.a.mark((function t(n){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s(n),c(!0),t.abrupt("return",new Promise((function(t){e.current=t})));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{isOpen:r,initialData:l,open:function(e){return p.apply(this,arguments)},close:function(t){s(null),c(!1),e.current&&e.current(t)}}};var Y=p.firestore.FieldValue,q=Y.serverTimestamp,K=Y.arrayUnion,Q=Y.arrayRemove;function Z(e){var t=e.onCreate,n=Object(a.useState)(""),c=Object(u.a)(n,2),o=c[0],i=c[1];function l(e){""!==e.trim()&&(t(e),i(""))}return r.a.createElement(g.a,{style:{flexWrap:"nowrap"},gutter:16},r.a.createElement(k.a,{flex:1},r.a.createElement(S.a,{placeholder:"Add new todo...",value:o,onChange:function(e){return i(e.target.value)},onPressEnter:function(){return l(o)}})),r.a.createElement(k.a,null,r.a.createElement(w.a,{shape:"circle",icon:r.a.createElement(M.a,null),onClick:function(){return l(o)}})))}var $=function(){var e=d.currentUser.uid,t=Object(i.g)().listId,n=Object(i.f)(),a=X(),c=J(),o=V(),l=function(e){var t=V().where("listId","==",e);return Object(H.a)(t,{idField:"id"})}(t),s=Object(u.a)(l,1)[0],p=function(e){var t=Object(H.b)(m.doc("lists/".concat(e))),n=Object(u.a)(t,1)[0];return n&&n.data()}(t)||{};function f(){return(f=Object(v.a)(E.a.mark((function n(a){return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,o.add({listId:t,uid:e,title:a,isDone:!1,createdAt:q()});case 2:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function h(){return(h=Object(v.a)(E.a.mark((function e(t,n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.doc(t).update({isDone:!n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(){return(b=Object(v.a)(E.a.mark((function e(t){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.doc(t).delete();case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return(j=Object(v.a)(E.a.mark((function e(n){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.doc(t).update({shared:K(n)});case 2:a.close();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(v.a)(E.a.mark((function n(a){return E.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(d.currentUser.email!==a&&p.uid===e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,c.doc(t).update({shared:Q(a)});case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return r.a.createElement(z,{title:"List: ".concat(p.title||""),onBack:function(){return n.goBack()}},r.a.createElement(A.a,{size:"small"},r.a.createElement(A.a.Item,{label:"Members"},p.shared&&p.shared.map((function(t){return r.a.createElement(D.a,{key:t,closable:d.currentUser.email!==t&&p.uid===e,onClose:function(){return function(e){return y.apply(this,arguments)}(t)}},t)})),r.a.createElement(F,{key:"add-new-tag",text:"Add Member",onCreate:function(e){return j.apply(this,arguments)}}))),r.a.createElement(C.b,{header:r.a.createElement(Z,{onCreate:function(e){return f.apply(this,arguments)}}),bordered:!0},s&&s.map((function(e){return r.a.createElement(C.b.Item,{key:e.id},r.a.createElement(I.a,{checked:e.isDone,onChange:function(){return function(e,t){return h.apply(this,arguments)}(e.id,e.isDone)}},e.title),r.a.createElement(w.a,{shape:"circle",icon:r.a.createElement(N.a,null),onClick:function(){return function(e){return b.apply(this,arguments)}(e.id)}}))}))))};function _(){return r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/"},r.a.createElement(L,null)))}function ee(){return r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/"},r.a.createElement(G,null)),r.a.createElement(i.a,{exact:!0,path:"/:listId"},r.a.createElement($,null)))}var te=function(){var e=Object(s.a)(d),t=Object(u.a)(e,2),n=t[0];return t[1]?r.a.createElement("div",null,"loading..."):r.a.createElement(l.a,null,n?r.a.createElement(ee,null):r.a.createElement(_,null))},ne=n(169),ae=function(e){var t={interceptors:{request:function(){var e=Object(v.a)(E.a.mark((function e(t){var n;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.options,t.url,t.path,t.route,n.headers["Content-Type"]="application/json",e.abrupt("return",n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),response:function(){var e=Object(v.a)(E.a.mark((function e(t){var n,a;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.response,a=n,e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}};return r.a.createElement(ne.b,Object.assign({url:f.apiHost,options:t},e))};function re(){return r.a.createElement(ae,null,r.a.createElement(te,null))}n(277),n(278);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(re,null)),document.getElementById("root"))}},[[179,1,2]]]);
//# sourceMappingURL=main.aa684dae.chunk.js.map