(this["webpackJsonpshared-todos-web"]=this["webpackJsonpshared-todos-web"]||[]).push([[0],{45:function(e,t,n){e.exports=n(77)},76:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(28),i=n.n(c),o=n(7),u=n(41),l=n(20),s=n(14),d=n(8),p=n(25),f=n(30),m=n.n(f),b=function(e){return e.auth},v=function(e){var t=b(e).isAuthenticated;return t},h=function(e){return b(e).accessToken},E=function(e){return b(e).userProfile},j=Object(l.b)({name:"auth",initialState:{isAuthenticated:!1,accessToken:null,userProfile:{}},reducers:{login:function(e,t){var n=t.payload,a=n.email,r=n.userProfile,c=n.accessToken;e.isAuthenticated=!0,e.accessToken=c,e.userProfile=Object(p.a)({},r),e.userProfile.email=a},logout:function(){}}}),O=j.actions,g=Object(s.g)({key:"auth",storage:m.a},j.reducer),k=function(e){return e.lists},y=function(e){var t=k(e),n=t.listsIds,a=t.entities;return n.map((function(e){return a.lists[e]}))},w=function(e,t){return k(e).entities.lists[t]},x=function(e,t){var n=k(e).entities;return Object.values(n.todos).filter((function(e){return e.listId===t}))},I=Object(l.b)({name:"lists",initialState:{entities:{lists:{},todos:{}},listsIds:[]},reducers:{addList:function(e,t){var n=t.payload;e.listsIds.push(n.id),e.entities.lists[n.id]=n},removeList:function(e,t){var n=t.payload;delete e.entities[n];var a=e.listsIds.indexOf(n);a>-1&&e.listsIds.splice(a,1)},addTodo:function(e,t){var n=t.payload;e.entities.todos[n.id]=Object(p.a)(Object(p.a)({},n),{},{isDone:!1})},toggleTodo:function(e,t){var n=t.payload;e.entities.todos[n].isDone=!e.entities.todos[n].isDone}}}),C=I.actions,S=Object(s.g)({key:"lists",storage:m.a},I.reducer),T=Object(d.c)({auth:g,lists:S});var A=function(e,t){return t.type===O.logout.toString()&&(e=void 0,localStorage.removeItem("persist:auth"),localStorage.removeItem("persist:lists")),T(e,t)},P=Object(l.a)({reducer:A,middleware:Object(l.c)({serializableCheck:{ignoredActions:[s.a,s.f,s.b,s.c,s.d,s.e]}}),devTools:!1}),D=Object(s.h)(P),L=P,z=n(4),H=n(22),J=n(5),B=n.n(J),G=n(13),M=n(42),R=n(34),U=(n(66),{apiHost:"https://us-central1-shared-todos-fb.cloudfunctions.net",firebaseConfig:{apiKey:"AIzaSyDXyJwQbD7bYdCj-AkXYLM80j3oVFHGIcw",authDomain:"shared-todos-fb.firebaseapp.com",databaseURL:"https://shared-todos-fb.firebaseio.com",projectId:"shared-todos-fb",storageBucket:"shared-todos-fb.appspot.com",messagingSenderId:"92468362104",appId:"1:92468362104:web:c66efaad8189915ebde68d"}});Object(R.initializeApp)(U.firebaseConfig);var X=new R.auth.GoogleAuthProvider;var Y=function(){var e=Object(o.b)();function t(){return(t=Object(G.a)(B.a.mark((function t(){var n;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(M.auth)().signInWithPopup(X);case 3:n=t.sent,e(O.login({email:n.user.email,userProfile:n.additionalUserInfo.profile,accessToken:n.credential.accessToken})),console.log(n),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}return r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return t.apply(this,arguments)}},"sign up with google"))},q=n(19),F=n(31),K=n.n(F);var Q=function(e){var t=e.children,n=e.title,a=Object(o.b)(),c=Object(o.c)(E);return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,c.name),r.a.createElement("img",{width:48,height:48,src:c.picture,alt:""}),r.a.createElement("button",{onClick:function(){a(O.logout())}},"logout")),n&&r.a.createElement("div",null,r.a.createElement("strong",null,n)),r.a.createElement("div",null,t))};var V=function(){var e=Object(a.useRef)(null),t=Object(a.useState)(!1),n=Object(q.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(null),o=Object(q.a)(i,2),u=o[0],l=o[1];function s(){return(s=Object(G.a)(B.a.mark((function t(n){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(n),c(!0),t.abrupt("return",new Promise((function(t){e.current=t})));case 3:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return{isOpen:r,initialData:u,open:function(e){return s.apply(this,arguments)},close:function(t){l(null),c(!1),e.current&&e.current(t)}}};function W(e){var t=e.close,n=Object(a.useState)(""),c=Object(q.a)(n,2),i=c[0],o=c[1];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:i,onChange:function(e){return o(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return t({title:i})}},"create"),r.a.createElement("button",{onClick:function(){return t()}},"close")))}var N=function(){var e=Object(o.b)(),t=Object(o.c)(y),n=V();function a(){return(a=Object(G.a)(B.a.mark((function t(){var a;return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.open();case 2:if(a=t.sent){t.next=5;break}return t.abrupt("return");case 5:e(C.addList({id:K.a.generate(),title:a.title}));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function c(){return(c=Object(G.a)(B.a.mark((function t(n){return B.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(C.removeList(n));case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return r.a.createElement(Q,{title:"lists overview"},r.a.createElement("button",{onClick:function(){return a.apply(this,arguments)}},"create list"),r.a.createElement("div",null,t.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("span",null,e.id)," ",r.a.createElement(H.b,{to:"/".concat(e.id)},e.title),r.a.createElement("button",{onClick:function(){return function(e){return c.apply(this,arguments)}(e.id)}},"remove"))}))),n.isOpen&&r.a.createElement(W,n))};function Z(e){var t=e.close,n=Object(a.useState)(""),c=Object(q.a)(n,2),i=c[0],o=c[1];return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("input",{type:"text",value:i,onChange:function(e){return o(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{onClick:function(){return t({title:i})}},"create"),r.a.createElement("button",{onClick:function(){return t()}},"close")))}var $=function(){var e=Object(z.f)().listId,t=Object(o.b)(),n=Object(o.c)((function(t){return w(t,e)})),a=Object(o.c)((function(t){return x(t,e)})),c=V();function i(){return(i=Object(G.a)(B.a.mark((function n(){var a;return B.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c.open();case 2:if(a=n.sent){n.next=5;break}return n.abrupt("return");case 5:t(C.addTodo({listId:e,id:K.a.generate(),title:a.title}));case 6:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return r.a.createElement(Q,{title:"todos"},r.a.createElement(H.b,{to:"/"},"<--"," back"),r.a.createElement("div",null,n.title),r.a.createElement("button",{onClick:function(){return i.apply(this,arguments)}},"create todo"),r.a.createElement("div",null,a.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement("input",{type:"checkbox",checked:e.isDone,onChange:function(){return n=e.id,void t(C.toggleTodo(n));var n}}),r.a.createElement("span",null,e.id)," ",r.a.createElement("span",null,e.title))}))),c.isOpen&&r.a.createElement(Z,c))};function _(){return r.a.createElement(z.c,null,r.a.createElement(z.a,{path:"/"},r.a.createElement(Y,null)))}function ee(){return r.a.createElement(z.c,null,r.a.createElement(z.a,{exact:!0,path:"/"},r.a.createElement(N,null)),r.a.createElement(z.a,{exact:!0,path:"/:listId"},r.a.createElement($,null)))}var te=function(){var e=Object(o.c)(v);return r.a.createElement(H.a,null,e?r.a.createElement(ee,null):r.a.createElement(_,null))},ne=n(44),ae=function(e){var t=Object(o.c)(h),n={interceptors:{request:function(){var e=Object(G.a)(B.a.mark((function e(n){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.options,n.url,n.path,n.route,a.headers["Content-Type"]="application/json",a.headers.Authorization=t,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),response:function(){var e=Object(G.a)(B.a.mark((function e(t){var n,a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.response,a=n,e.abrupt("return",a);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}};return r.a.createElement(ne.b,Object.assign({url:U.apiHost,options:n},e))};function re(){return r.a.createElement(o.a,{store:L},r.a.createElement(u.a,{loading:null,persistor:D},r.a.createElement(ae,null,r.a.createElement(te,null))))}n(76);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(re,null)),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.791762c0.chunk.js.map